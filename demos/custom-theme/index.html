<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />

    <title>Custom theme preview</title>

    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
      .logo {
        box-sizing: border-box;
        font-family: "lego_brixregular", "Helvetica Neue", Helvetica, Arial, sans-serif;
        position: absolute;
        top: 0px;
        left: 50%;
        width: 30%;
        margin-left: -15%;
        text-align: center;
        background-color: #e3000b;
        text-shadow: 2px 2px 0px #000000;
        color: #fff;
        z-index: 1;
        border: 2px solid #000;
        padding: 30px;
      }
    </style>
    <link rel="stylesheet" href="../dist/my-theme/main.css" />

    <script>
      var locationPath = window.location.href.replace(/\/[^/]+$/, "/");
      var dojoConfig = {
        paths: {
          layers: locationPath + "../layers"
        }
      };
    </script>

    <script src="https://js.arcgis.com/4.12/"></script>

    <script>
      require([
        "esri/views/MapView",
        "esri/Map",
        "esri/widgets/Search",
        "esri/widgets/Legend",
        "esri/widgets/Compass",
        "esri/widgets/Expand",
        "esri/widgets/LayerList",
        "esri/widgets/Home",
        "esri/Basemap",
        "esri/layers/TileLayer",
        "layers/BrickLayer",
        "layers/palette"
      ], function(
        MapView,
        Map,
        Search,
        Legend,
        Compass,
        Expand,
        LayerList,
        Home,
        Basemap,
        TileLayer,
        BrickLayer,
        palette
      ) {
        var basemap = new Basemap({
          baseLayers: [
            new BrickLayer({
              layer: new TileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"),
              filter: {
                darken: 0.25,
                saturate: 2
              }
            })
          ]
        });

        var map = new Map({
          basemap: basemap
        });

        var view = new MapView({
          map: map,
          container: "viewDiv",
          center: [-100, 40],
          scale: 50000000,
          constraints: {
            minScale: 50000000,
            snapToZoom: false
          }
        });

        var home = new Home({
          view: view
        });
        view.ui.add(home, "top-left");

        var compass = new Compass({
          view: view
        });
        view.ui.add(compass, "top-left");

        var search = new Search({
          view: view
        });
        view.ui.add(search, "top-right");

        var legend = new Legend({
          view: view
        });
        var legendExpand = new Expand({
          view: view,
          content: legend,
          expanded: true
        });
        view.ui.add(legendExpand, "bottom-left");

        var layerList = new LayerList({
          view: view
        });
        var layerListExpand = new Expand({
          view: view,
          content: layerList,
          expanded: true
        });
        view.ui.add(layerListExpand, "top-left");
      });
    </script>
  </head>

  <body>
    <h1 class="logo">BLOCKY McBRICK Co<sup>&trade;</sup></h1>
    <div id="viewDiv"></div>
  </body>
</html>
